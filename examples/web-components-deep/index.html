<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Web Components: Deep Shadow DOM</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <main class="page">
      <header class="header">
        <p class="eyebrow">ARIA anti-pattern demo</p>
        <h1>Web Components: Deep Shadow DOM</h1>
        <p class="subtitle">
          This page nests multiple open shadow roots. The unlabeled controls and
          images live several layers deep inside the component tree.
        </p>
      </header>

      <section class="card">
        <h2>Nested component tree</h2>
        <p class="subtitle">
          The <code>&lt;app-shell&gt;</code> element contains <code>&lt;tool-pane&gt;</code>,
          which in turn contains <code>&lt;action-ribbon&gt;</code>.
        </p>
        <div class="component-shell">
          <app-shell></app-shell>
        </div>
        <p class="hint">
          Deep shadow tree: app-shell &gt; tool-pane &gt; action-ribbon.
        </p>
      </section>
    </main>

    <script>
      class AppShell extends HTMLElement {
        constructor() {
          super();
          this.attachShadow({ mode: 'open' });
        }

        connectedCallback() {
          if (this.shadowRoot.children.length > 0) {
            return;
          }

          this.shadowRoot.innerHTML = `
            <style>
              :host {
                display: block;
                font-family: "Segoe UI", Tahoma, Arial, sans-serif;
              }

              .shell {
                border-radius: 16px;
                border: 1px solid #cbd5e1;
                padding: 18px;
                background: #f1f5f9;
              }

              .shell-header h3 {
                margin: 0 0 6px;
              }

              .shell-header p {
                margin: 0 0 12px;
                color: #52606d;
              }
            </style>
            <div class="shell">
              <div class="shell-header">
                <h3>Operations console</h3>
                <p>Navigation and media controls are rendered inside nested Web Components.</p>
              </div>
              <tool-pane></tool-pane>
            </div>
          `;
        }
      }

      class ToolPane extends HTMLElement {
        constructor() {
          super();
          this.attachShadow({ mode: 'open' });
        }

        connectedCallback() {
          if (this.shadowRoot.children.length > 0) {
            return;
          }

          this.shadowRoot.innerHTML = `
            <style>
              :host {
                display: block;
                font-family: "Segoe UI", Tahoma, Arial, sans-serif;
              }

              .pane {
                border-radius: 14px;
                border: 1px solid #d9e2ec;
                padding: 16px;
                background: #ffffff;
                display: grid;
                gap: 12px;
              }

              .pane h4 {
                margin: 0 0 4px;
              }

              .pane p {
                margin: 0;
                color: #52606d;
              }
            </style>
            <div class="pane">
              <div>
                <h4>Alert workflow</h4>
                <p>Icons and imagery are rendered inside the deepest shadow root.</p>
              </div>
              <action-ribbon></action-ribbon>
            </div>
          `;
        }
      }

      class ActionRibbon extends HTMLElement {
        constructor() {
          super();
          this.attachShadow({ mode: 'open' });
        }

        connectedCallback() {
          if (this.shadowRoot.children.length > 0) {
            return;
          }

          this.shadowRoot.innerHTML = `
            <style>
              :host {
                display: block;
                font-family: "Segoe UI", Tahoma, Arial, sans-serif;
              }

              .ribbon {
                border-radius: 12px;
                border: 1px solid #e2e8f0;
                padding: 12px;
                background: #f8fafc;
              }

              .toolbar {
                display: flex;
                gap: 10px;
                margin-bottom: 12px;
              }

              .icon-button {
                width: 46px;
                height: 46px;
                border-radius: 12px;
                border: 1px solid #d9e2ec;
                background: #ffffff;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
              }

              .icon {
                width: 22px;
                height: 22px;
                stroke: currentColor;
                stroke-width: 2;
                fill: none;
                stroke-linecap: round;
                stroke-linejoin: round;
              }

              .ribbon-image {
                width: 160px;
                height: 90px;
                border-radius: 10px;
                border: 1px solid #e2e8f0;
                object-fit: cover;
              }
            </style>
            <div class="ribbon">
              <div class="toolbar">
                <button class="icon-button" type="button">
                  <svg class="icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                    <circle cx="10" cy="10" r="6"></circle>
                    <line x1="15" y1="15" x2="21" y2="21"></line>
                  </svg>
                </button>
                <button class="icon-button" type="button">
                  <svg class="icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                    <line x1="4" y1="7" x2="20" y2="7"></line>
                    <line x1="4" y1="12" x2="20" y2="12"></line>
                    <line x1="4" y1="17" x2="20" y2="17"></line>
                  </svg>
                </button>
                <button class="icon-button" type="button">
                  <svg class="icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                    <path d="M12 20s-6-4.3-8.4-7.4C1.6 9.1 3.4 6 6.3 6c1.8 0 3.3 1 4.7 2.6C12.3 7 13.9 6 15.7 6c2.9 0 4.7 3.1 2.7 6.6C18 15.7 12 20 12 20z"></path>
                  </svg>
                </button>
              </div>
              <img class="ribbon-image" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='160' height='90'><rect width='160' height='90' fill='%23fee2e2'/><rect x='12' y='12' width='60' height='66' rx='8' fill='%23fecaca'/><circle cx='118' cy='40' r='24' fill='%23fca5a5'/><rect x='92' y='66' width='52' height='12' rx='6' fill='%23f87171'/></svg>">
            </div>
          `;
        }
      }

      if (!customElements.get('app-shell')) {
        customElements.define('app-shell', AppShell);
      }
      if (!customElements.get('tool-pane')) {
        customElements.define('tool-pane', ToolPane);
      }
      if (!customElements.get('action-ribbon')) {
        customElements.define('action-ribbon', ActionRibbon);
      }
    </script>
  </body>
</html>
